<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Princess Bride Chat</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./assets/style.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
</head>

<body>

  <aside class="bg-body-secondary border-end desktop-only justify-content-between">
    <div>
      <h2>Rooms</h2>

      <div class="input-group">
        <span class="input-group-text bg-body-tertiary" id="basic-addon1"><i class="bi bi-search"></i></span>
        <input class="form-control bg-body-tertiary" id="chatName" placeholder="Search rooms..." />
      </div>

      <div id="rooms">
        <button id="joinBtn" class="btn btn-light text-center d-none"><i class="bi bi-plus-lg"></i> Create room</button>
      </div>
      
    </div>
    <div>
      <div class="d-flex flex-row justify-content-center mt-3 mb-3" id="ad-2">
        <div style="width: 100%; height: 40vh; background-color: #888888">Ad 2 (desktop only)</div>
      </div>
      <p class="text-start fst-light lh-sm small text-muted">
        Made with ❤️ by <a class="text-muted" href="https://github.com/eliaselliotson">Elias Elliotson</a>
        and <a class="text-muted" href="https://github.com/kokorocks">kokorocks</a>
        on <a class="text-muted" href="https://github.com/eliaselliotson/princessbridechat/">GitHub</a>.
      </p>
    </div>
  </aside>

  <main>
    <header class="bg-body border-bottom shadow-sm sticky-top">
      <div class="d-flex flex-row justify-content-between">
        <h2 id="room-title" class="mb-0">Connecting...</h2>
        <div>
          <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#share-modal"><i class="bi bi-link"></i></button>
          <button id="notifications-toggle" type="button" class="btn btn-primary"></button>
          <button id="theme-toggle" type="button" class="btn btn-primary"></button>
          <button id="login-opener" type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#login-modal">Register</button>
          <button id="menu-opener" type="button" class="btn btn-primary mobile-only"><i class="bi bi-list"></i></button>
        </div>
      </div>
      <div class="d-flex flex-row justify-content-center mt-3" id="ad-1">
        <div style="max-width: 800px; width: 100%; height: 8em; background-color: #888888">Ad 1 (mobile only)</div>
      </div>
    </header>

    <div>
      <div id="messages"></div>

      <div id="input" style="display:none;" class="sticky-bottom bg-body border-top shadow">
        <input id="msgInput" type="text" placeholder="Type something..." class="form-control" />
        <button id="sendBtn" class="btn btn-primary"><i class="bi bi-send-fill"></i></button>
      </div>
    </div>

    <!-- Login/Register modal -->
    <div class="modal fade" id="login-modal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabel">Log In or Sign Up</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <input id="username" placeholder="Username" class="form-control mb-2" />
            <input id="password" type="password" placeholder="Password" class="form-control mb-2" />
            <div class="mb-3 d-flex flex-row justify-content-center gap-2">
              <button id="signupBtn" class="btn btn-primary">Sign Up</button>
              <button id="loginBtn" class="btn btn-primary">Login</button>
            </div>
            <p class="text-start fst-italic fst-light lh-sm small text-muted mb-1">
              This app is completely free, and no email or personal information is required.
              We do not guarantee ongoing maintenance or support for the app, and we are not
              responsible for any misconduct by the app's users. Use at your own risk.
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Share modal-->
    <div class="modal fade" id="share-modal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabel">Invite a Friend</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <p>Chatting is always more fun with friends! Send this link to someone you know so they can chat too.</p>
            <div style="margin-top:8px; display:flex; gap:8px; align-items:center;">
              <input id="shareUrl" readonly style="flex:1; padding:8px;" class="form-control" />
              <button id="copyBtn" class="btn btn-primary"><i class="bi bi-copy"></i></button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/gun/gun.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gun/sea.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
  <script src="./script.js"></script>

</body>

</html>